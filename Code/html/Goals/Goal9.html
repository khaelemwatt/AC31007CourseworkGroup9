<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>

<link href='./../../CSS/bootstrap.min.css' rel='stylesheet' type='text/css'>
<link href='./../../CSS/Colours.css' rel='stylesheet' type='text/css'>
<link href='./../../CSS/Goals.css' rel='stylesheet' type='text/css'>
<title>industrialization</title>
</head>

<body class=''>
      <div class='pos-f-t '>
        <div class='collapse' id='navbarToggleExternalContent'>
          <div class='blackB p-4'>
            <h4 class='text-white'></h4>
            <span class='text-muted'></span>
          </div>
        </div>
        <nav class='navbar navbar-dark blackB '>
          <a href="./../home.html" style="width:80%"> <img class="Logo" src="./../Images/SDGlogo.jpg" alt="SDG" ></a>
          <a href="./../createEvent.html" class="btn btn-info" role="button">Events</a>
          
        </nav>
      </div>
    <div class='container-fluid GoalTitle'>
        <H1 class='display-5 Viridian_Green'>Goal 9: Industry, Innovation and Infrastructure<br><small class=' Yellow_Green'> Build resilient infrastructure, promote inclusive and sustainable industrialization and foster innovation.</small></H1>
    </div>
    <div class='card  justify-content-center Rose_RedB HowToHelp' >
        
          <h5 class=' display-5'>How To Help</h5>
          <p class='lead'>Learn about innovation in your city, how to get involved, career opportunities in innovation, research and development.  
          Make use of sustainable transport infrastructure. 
          </p> 
    </div>
    <div class='container-fluid justify-content-center GoalTitle' >
        <H3 class='display-5 Viridian_Green'>Local Charities</H1>
    </div>
      <div class='row justify-content-center '>
        <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >MSIP</h4>
            <hr class='my-4'>
            <p>Michelin Scotland Innovation Parc - world class innovation parc in Dundee for sustainable mobility and decarbonisation. </p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://www.msipdundee.com/              ' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >MVV</h4>
            <hr class='my-4'>
            <p>Energy from waste facility in Dundee. *potential to visit at a later date* </p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://www.mvv.de/en/about-us/group-of-companies/mvv-umwelt/subsidiaries/mvv-environment-ltd/baldovie-efw-chp-facility-dundee              ' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >The MILL/ Urban Foresight</h4>
            <hr class='my-4'>
            <p>Mobility Innovation Living Lab, Dundee. The MILL is transforming Dundee ito a real-world test and experimentation environment for innovative mobility solutions. They provide expert support to large and small businesses. Including access to funding, infrastructure and end-users. *potential for school visits/workshops* </p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://themill.scot/              ' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >s5G Connect Dundee</h4>
            <hr class='my-4'>
            <p>S5GConnect Dundee is opening a range of support, facilities and opportunities for businesses of all sizes to test and develop new 5G applications and services. *Find out more* </p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://danurobotics.com/              ' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >Dundee Esports Arena</h4>
            <hr class='my-4'>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >Danu Robotics</h4>
            <hr class='my-4'>
            <p>Robotics company with a robotic system for sorting recycling moving to MSIP.</p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://scotland5gcentre.org/s5gconnect/s5gconnect-dundee/' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >Dundee Eden Project</h4>
            <hr class='my-4'>
            
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >Dundee Science Centre</h4>
            <hr class='my-4'>
            <p>Events, activities, learning opportunities </p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://www.dundeesciencecentre.org.uk/?gclid=Cj0KCQiAip-PBhDVARIsAPP2xc0DfaEICTubJ8ejpkqhdEUrRjuNVk7r55nA6MCzeyq6QCMv1sn3BygaAic7EALw_wcB' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >Dundee's Waterfront</h4>
            <hr class='my-4'>
            <p>Regeneration of Dundee City Waterfront. 30 year long project. (Visit and learn about the history, how the transformational changes have postivley impacted the city.) </p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://www.dundeewaterfront.com/' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >V&A Dundee</h4>
            <hr class='my-4'>
            <p>Scotland's first design museum. Significant economic impact bringing Â£21 million to the Dundee economy in the first 12 months of opening and the creation of jobs across Scotland.  </p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://www.vam.ac.uk/info/plan-your-visit?gclid=Cj0KCQiAip-PBhDVARIsAPP2xc3B7pQ89FIbBCDg_D1rhdVo0TAsXx5JaqZz7rV1osUKhugv279otSwaAuRAEALw_wcB ' role='button'>Learn more</a>
            </p>
          </div>
          <div class='card Yellow_GreenB EID' style='max-width: 30%;'>
            <h4 >University of Dundee</h4>
            <hr class='my-4'>
            <p>One of the UK's leading universities, internationally recognised for its expertise across a range of disciplines .</p>
            <p class='lead'>
              <a class='btn Viridian_Green btn-lg' href='https://www.dundee.ac.uk/' role='button'>Learn more</a>
            </p>
          </div>
    </div>
    <div class=' row  justify-content-center'>
    <nav aria-label='Page navigation example'>
      <ul class='pagination pagination-lg'>
        <li class='page-item'><a class='page-link Viridian_Green' href='Goal8.php'>Previous</a></li>
        <li class='page-item'><a class='page-link Viridian_Green' href='Goal7.php'>7</a></li>
        <li class='page-item'><a class='page-link Viridian_Green' href='Goal8.php'>8</a></li>
	<li class='page-item'><span class='page-link disabled CurrentGoal'>9</span></li>
        <li class='page-item'><a class='page-link Viridian_Green' href='Goal10.php'>10</a></li>
        <li class='page-item'><a class='page-link Viridian_Green' href='Goal11.php'>11</a></li>
        <li class='page-item'><a class='page-link Viridian_Green' href='Goal10.php'>Next</a></li>
      </ul>
    </nav>
    </div>
</body>

<script>
  mapboxgl.accessToken = 'pk.eyJ1Ijoia2hhZWxlbXdhdHQiLCJhIjoiY2syczhpdGFhMGU3ejNnbnozYXB0cm03YSJ9.GCaekm2x9qIeIWZe_Kq5LA';
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [-3.002864, 56.472182],
    zoom: 11.15,
  });

  // Add zoom and rotation controls to the map.
  map.addControl(new mapboxgl.NavigationControl());


  //Fetches all events related to one goal and sends the data to load in the markers
  fetch('https://group9agilewebapp.azurewebsites.net/api/devEvents/9')
  .then(response => response.json())
  .then(data => {
    loadMarkers(data);
  })
  .catch((error) => {
  console.error('Error:', error);
  });

  //Takes in JSON data and displays their marker on the map
  function loadMarkers(data){
    var markers = [];
    console.log(data);
    console.log(Object.keys(data).length);

    for(var i=0; i < Object.keys(data).length; i++){
      var desc = "<strong>" + data[i].Name + "</strong><p class='popup-text' id='" + data[i].EventId + "'>" + data[i].Info + "</p><br><p>" + data[i].Date + "</p>";
      var obj = {'type': 'Feature','properties': {'description': desc},'geometry': {'type': 'Point','coordinates': [data[i].Longitude, data[i].Latitude]}};
      markers.push(obj);

      map.on('load', () => {
        map.addSource('places', {
          'type': 'geojson',
          'data': {
            'type': 'FeatureCollection',
            'features': markers
          }
        });
        console.log(i);
        // Add a layer showing the places.
        map.addLayer({
          'id': 'places',
          'type': 'circle',
          'source': 'places',
          'paint': {
            'circle-color': '#4264fb',
            'circle-radius': 6,
            'circle-stroke-width': 2,
            'circle-stroke-color': '#ffffff'
          }
        });
        
        // Create a popup, but don't add it to the map yet.
        const popup = new mapboxgl.Popup({
          closeButton: false,
          closeOnClick: false
        });

        map.on('click', 'places', (e) => {
          var text = document.getElementsByClassName("popup-text")[0];
          sessionStorage.setItem("singleEvent", text.id);
          window.location.href = "https://khaelemwatt.github.io/AC31007CourseworkGroup9/Code/html/eventInfo.html";
        })
        
        map.on('mouseenter', 'places', (e) => {
          // Change the cursor style as a UI indicator.
          map.getCanvas().style.cursor = 'pointer';
          
          // Copy coordinates array.
          const coordinates = e.features[0].geometry.coordinates.slice();
          const description = e.features[0].properties.description;
          
          // Ensure that if the map is zoomed out such that multiple
          // copies of the feature are visible, the popup appears
          // over the copy being pointed to.
          while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
          }
          
          // Populate the popup and set its coordinates
          // based on the feature found.
          popup.setLngLat(coordinates).setHTML(description).addTo(map);
        });
        
        map.on('mouseleave', 'places', () => {
          map.getCanvas().style.cursor = '';
          popup.remove();
        });
      });
    }   
  } 
  </script>

<script src='https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js' integrity='sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj' crossorigin='anonymous'></script>
<script src='./../../js/bootstrap.bundle.js' ></script>

</html>